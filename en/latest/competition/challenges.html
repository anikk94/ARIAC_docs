<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agility Challenges &mdash; ARIAC_docs 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
      <link rel="stylesheet" type="text/css" href="../_static/ntd2d.css?v=592263c6" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/twemoji.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=62faf5e4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/hack.css?v=c2ad982c" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=359c27e9"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../_static/js/hoverxref.js"></script>
        <script src="../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../_static/js/micromodal.min.js"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=faefdcb3"></script>
        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>
        <script src="../_static/twemoji.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../_static/js/custom.js?v=8fe80478"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TF Frames" href="tf_frames.html" />
    <link rel="prev" title="ROS Communication Overview" href="ros_communication.html" />
   

  <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
  <script src="https://code.jquery.com/jquery-3.6.2.min.js" type="text/javascript" defer="defer"></script>
  

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARIAC_docs
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">⏩ Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installing ARIAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/registering.html">Registering for the Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/events.html">Calendar of Events</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">⏩ Competition Specifications</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview of the Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="environment.html">Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="orders.html">Conditions, Orders, and Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="trials.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="ros_communication.html">ROS Communication Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Agility Challenges</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#faulty-parts">Faulty Parts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#detection">Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#flipped-parts">Flipped Parts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#faulty-gripper">Faulty Gripper</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#robot-malfunction">Robot Malfunction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sensor-blackout">Sensor Blackout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#high-priority-orders">High-priority Orders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id12">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">Detection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#insufficient-parts">Insufficient Parts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Detection</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bins">Bins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conveyor-belt">Conveyor Belt</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#human">Human</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Detection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tf_frames.html">TF Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="scoring.html">Scoring</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">⏩ Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Introduction to Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_1.html">Tutorial 1: Create a Competition Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_2.html">Tutorial 2: Read Data from a Break Beam Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_3.html">Tutorial 3: Read Data from an Advanced Logical Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_4.html">Tutorial 4: Read an Order</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_5.html">Tutorial 5: Move AGVs to Stations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_6.html">Tutorial 6: Enable/Disable a Gripper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_7.html">Tutorial 7: Move Robots with MoveIt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_8.html">Tutorial 8: Move Robots with ROS2 Actions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">⏩ Automated Evaluation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../automated_evaluation/automated_evaluation_overview.html">Automated Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automated_evaluation/competition_launch.html">Launch File Setup</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARIAC_docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Agility Challenges</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/competition/challenges.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <blockquote>
<div></div></blockquote>
<section id="agility-challenges">
<span id="id1"></span><h1>Agility Challenges<a class="headerlink" href="#agility-challenges" title="Permalink to this heading"></a></h1>
<p>There are 8 possible <a class="hxr-hoverxref hxr-tooltip reference internal" href="terminology.html#term-Agility-Challenge"><span class="xref std std-term">agility challenges</span></a> in ARIAC 2023.
A description of each challenge is provided below. Besides the <a class="hxr-hoverxref hxr-modal reference internal" href="#humans"><span class="std std-ref">Human</span></a> challenge,
all other challenges can occur multiple times in a trial.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A trial may consist of some of the challenges described in this page, may consist of no
challenge at all, or may consist of all the challenges.</p>
</div>
<section id="faulty-parts">
<span id="id2"></span><h2>Faulty Parts<a class="headerlink" href="#faulty-parts" title="Permalink to this heading"></a></h2>
<p>Faulty parts are parts that are not in good condition. They are not suitable for use in the competition.
If an order is submitted with faulty parts, these parts are not considered for scoring.
Faulty parts are identified by quality control sensors, which are attached
to AGVs.</p>
<blockquote>
<div><p>The goal of this challenge is to test the ability of the CCS  to:</p>
<ol class="arabic simple">
<li><p>Correctly use the quality check sensor to detect faulty parts.</p></li>
<li><p>Replace them with new parts.</p></li>
</ol>
</div></blockquote>
<section id="setup">
<h3>Setup<a class="headerlink" href="#setup" title="Permalink to this heading"></a></h3>
<p>The faulty parts challenge is set with the field <code class="code yamlname docutils literal notranslate"><span class="pre">faulty_part</span></code> under the <code class="code yamlname docutils literal notranslate"><span class="pre">challenges</span></code> field
in the trial configuration file.
Only the first part placed in a quadrant is faulty.
In the example below, any first part placed in  quadrants 1 and 2 in the kitting tray required by
order <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;MMB30H56&#39;</span></code> is faulty.
If these parts are removed and replaced with new parts, the new parts will be non-faulty.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">challenges</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">faulty_part</span><span class="p">:</span>
<span class="w">      </span><span class="nt">order_id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MMB30H56&#39;</span>
<span class="w">      </span><span class="nt">quadrant1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">quadrant2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
<section id="detection">
<h3>Detection<a class="headerlink" href="#detection" title="Permalink to this heading"></a></h3>
<p>The quality control sensor located above an AGV is capable of
detecting faulty parts.
A quality check can be performed by calling the service <span class="rosservice">/ariac/perform_quality_check</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-srv-PerformQualityCheck"><span class="xref std std-term">ariac_msgs/srv/PerformQualityCheck</span></a>).
The argument passed to this service call is an order ID.
When a faulty part is detected, the CCS has to discard the
part and replace it with a new part.
The new part will automatically be set to non-faulty by the AM.</p>
<p>More information on the fields of the service message is provided as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p>The service returns a Boolean value for the field <code class="code yamlname docutils literal notranslate"><span class="pre">valid_id</span></code> indicating whether or not the order ID is valid. An order ID is not valid if the order ID does not exist or if the quality check was already called</p></li>
</ul>
<p>for this order ID.</p>
<ul class="simple">
<li><p>The field <code class="code yamlname docutils literal notranslate"><span class="pre">all_passed</span></code> is set to <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">true</span></code> only if:</p>
<ul>
<li><p>All parts in the kitting tray are NOT faulty.</p></li>
<li><p>All parts are present in the kitting tray (no empty quadrant).</p></li>
<li><p>All parts have the correct orientation (no flipped part).</p></li>
<li><p>All parts are of the correct type.</p></li>
<li><p>All parts are of the correct color.</p></li>
</ul>
</li>
<li><p>The field <code class="code yamlname docutils literal notranslate"><span class="pre">incorrect_tray</span></code> informs on whether or not the kitting task was performed in the correct kitting tray.</p></li>
<li><p>Information for each quadrant is reported as a <a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-QualityIssue"><span class="xref std std-term">ariac_msgs/msg/QualityIssue</span></a>.</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="flipped-parts">
<span id="id3"></span><h2>Flipped Parts<a class="headerlink" href="#flipped-parts" title="Permalink to this heading"></a></h2>
<p>The environment can be started with parts that are flipped. Flipped parts are parts that are upside down. When a part is spawned as flipped, the CCS is required to flip this part again so it ends up with the correct orientation. If an order is submitted with flipped parts, these parts are not considered for scoring.</p>
<blockquote>
<div><p>The goal of this challenge is to evaluate the approach used by the CCS to flip a part.</p>
</div></blockquote>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Competitors should keep in mind that one of the two robots can malfunction at any point during the trial.
This means that the CCS should be able to handle the case where
one of the robots is not available to flip a part.</p>
</div>
<section id="id4">
<h3>Setup<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<p>Flipped parts apply to a specific part type and color in a specific bin or on the conveyor belt.
To set parts as flipped, the <code class="code yamlname docutils literal notranslate"><span class="pre">flipped</span></code> field in the trial configuration file must be set
as <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">true</span></code> for the corresponding parts. <a class="hxr-hoverxref hxr-tooltip reference internal" href="#flipped-parts-in-bin"><span class="std std-numref">Listing 13</span></a> describes all purple
regulators as flipped in <code class="code yamlname docutils literal notranslate"><span class="pre">bin3</span></code>. <a class="hxr-hoverxref hxr-tooltip reference internal" href="#flipped-parts-on-conveyor-belt"><span class="std std-numref">Listing 14</span></a> describes all
orange batteries as flipped on the conveyor belt.</p>
<div class="literal-block-wrapper docutils container" id="flipped-parts-in-bin">
<div class="code-block-caption"><span class="caption-number">Listing 13 </span><span class="caption-text">Setting flipped parts in a bin.</span><a class="headerlink" href="#flipped-parts-in-bin" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">bin3</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;regulator&#39;</span>
<span class="w">    </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;purple&#39;</span>
<span class="w">    </span><span class="nt">slots</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">rotation</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pi/6&#39;</span>
<span class="w">    </span><span class="nt">flipped</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="flipped-parts-on-conveyor-belt">
<div class="code-block-caption"><span class="caption-number">Listing 14 </span><span class="caption-text">Setting flipped parts on the conveyor belt.</span><a class="headerlink" href="#flipped-parts-on-conveyor-belt" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">conveyor_belt</span><span class="p">:</span>
<span class="w">  </span><span class="nt">active</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">spawn_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3.0</span>
<span class="w">  </span><span class="nt">order</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;sequential&#39;</span>
<span class="w">  </span><span class="nt">parts_to_spawn</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">      </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;orange&#39;</span>
<span class="w">      </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">offset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span><span class="w"> </span><span class="c1"># between -1 and 1</span>
<span class="w">      </span><span class="nt">flipped</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">      </span><span class="nt">rotation</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pi/6&#39;</span>
</pre></div>
</div>
</div>
</section>
<section id="id5">
<h3>Detection<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<p>Flipped parts detection is performed similarly to faulty parts detection.
A quality check informs whether or not a part is flipped. See the <a class="hxr-hoverxref hxr-modal reference internal" href="#faulty-parts"><span class="std std-ref">Faulty Parts</span></a> section for more information on how to perform a quality check.</p>
</section>
</section>
<section id="faulty-gripper">
<span id="target-to-faulty-gripper"></span><h2>Faulty Gripper<a class="headerlink" href="#faulty-gripper" title="Permalink to this heading"></a></h2>
<p>The faulty gripper challenge simulates a faulty gripper which can drop a part after the part has been picked up. The gripper can drop a part at any time during the trial. The gripper can drop a part that is in the gripper’s grasp even if the gripper or robot is not moving.</p>
<blockquote>
<div><p>The goal of this challenge is to test the ability of the CCS to:</p>
<ol class="arabic simple">
<li><p>Recognize that the part has dropped from the gripper.</p></li>
<li><p>Pick a part of the same type and color.</p></li>
</ol>
</div></blockquote>
<section id="id6">
<h3>Setup<a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<p>The faulty gripper challenge can be set up in the trial configuration file with the field <code class="code yamlname docutils literal notranslate"><span class="pre">dropped_part</span></code> under the <code class="code yamlname docutils literal notranslate"><span class="pre">challenges</span></code> field. <a class="hxr-hoverxref hxr-tooltip reference internal" href="#faulty-gripper-setup"><span class="std std-numref">Listing 15</span></a> describes a faulty gripper occuring 5 seconds after the ceiling robot has picked up a second red pump (specified with the <code class="code yamlname docutils literal notranslate"><span class="pre">drop_after</span></code> field). Multiple occurrences of this challenge may be set up in the trial configuration file as seen in <a class="hxr-hoverxref hxr-tooltip reference internal" href="#multiple-faulty-gripper-setup"><span class="std std-numref">Listing 16</span></a>.</p>
<div class="literal-block-wrapper docutils container" id="faulty-gripper-setup">
<div class="code-block-caption"><span class="caption-number">Listing 15 </span><span class="caption-text">Setting up the faulty gripper challenge.</span><a class="headerlink" href="#faulty-gripper-setup" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">challenges</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dropped_part</span><span class="p">:</span>
<span class="w">        </span><span class="nt">robot</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ceiling_robot&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pump&#39;</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;red&#39;</span>
<span class="w">        </span><span class="nt">drop_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="multiple-faulty-gripper-setup">
<div class="code-block-caption"><span class="caption-number">Listing 16 </span><span class="caption-text">Multiple occurences of the faulty gripper challenge.</span><a class="headerlink" href="#multiple-faulty-gripper-setup" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">challenges</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dropped_part</span><span class="p">:</span>
<span class="w">        </span><span class="nt">robot</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;ceiling_robot&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pump&#39;</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;red&#39;</span>
<span class="w">        </span><span class="nt">drop_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dropped_part</span><span class="p">:</span>
<span class="w">        </span><span class="nt">robot</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;floor_robot&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;green&#39;</span>
<span class="w">        </span><span class="nt">drop_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dropped_part</span><span class="p">:</span>
<span class="w">        </span><span class="nt">robot</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;floor_robot&#39;</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;regulator&#39;</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;orange&#39;</span>
<span class="w">        </span><span class="nt">drop_after</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The gripper can drop a part even if the robot is not moving.</p>
</div>
</section>
<section id="id7">
<h3>Detection<a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<p>To detect a faulty gripper the CCS needs a subscriber to the topic <span class="topic">/ariac/{robot}_gripper_state</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-VacuumGripperState"><span class="xref std std-term">ariac_msgs/msg/VacuumGripperState</span></a>). Checking the <code class="code yamlname docutils literal notranslate"><span class="pre">attached</span></code> field of the message will inform whether or not the gripper is holding a part. If the gripper is not holding a part, the CCS can assume that the gripper has dropped the part.</p>
</section>
</section>
<section id="robot-malfunction">
<span id="target-to-robot-malfunction"></span><h2>Robot Malfunction<a class="headerlink" href="#robot-malfunction" title="Permalink to this heading"></a></h2>
<p>The robot malfunction challenge simulates a robot malfunction. The robot can malfunction under some <a class="hxr-hoverxref hxr-modal reference internal" href="orders.html#conditions"><span class="std std-ref">conditions</span></a> during the trial. The robot can malfunction even if it is not moving. When a robot malfunctions, it stops moving and cannot be controlled by the CCS. The robot will remain in the same position until the malfunction is resolved. To specify how long a robot malfunctions, a time duration of the malfunction is specified in the trial configuration file.</p>
<blockquote>
<div><p>The goal of this challenge is to test the ability of the CCS to use the other robot to complete the tasks that was being performed by the robot which is malfunctioning.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It can happen that both robots malfunction at the same time.
In this case, the CCS must wait until the malfunction is resolved before continuing with the trial.</p>
</div>
<section id="id8">
<h3>Setup<a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<p>The robot malfunction challenge is specified with the field <code class="code yamlname docutils literal notranslate"><span class="pre">robot_malfunction</span></code> as a subfield of <code class="code yamlname docutils literal notranslate"><span class="pre">challenges</span></code> in the trial configuration file. The relevant fields for this agility challenge are listed below.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code yamlname docutils literal notranslate"><span class="pre">duration</span></code>: The duration of the robot malfunction in seconds.</p></li>
<li><p><code class="code yamlname docutils literal notranslate"><span class="pre">robots_to_disable</span></code>: A list of robots that malfunction. It can be either <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;floor_robot&#39;</span></code> or <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;ceiling_robot&#39;</span></code> or both.</p></li>
<li><p><a class="hxr-hoverxref hxr-modal reference internal" href="orders.html#conditions"><span class="std std-ref">One condition</span></a> that can trigger the robot malfunction.</p></li>
</ul>
</div></blockquote>
<p>Robot malfunctions can occur multiple times in the same trial. <a class="hxr-hoverxref hxr-tooltip reference internal" href="#robot-malfunction-yaml"><span class="std std-numref">Listing 17</span></a> shows a robot malfunction challenge occurring 4 times under different conditions in the same trial.</p>
<div class="literal-block-wrapper docutils container" id="robot-malfunction-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 17 </span><span class="caption-text">Example of multiple occurrences of the robot malfunction challenge in the same trial.</span><a class="headerlink" href="#robot-malfunction-yaml" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">challenges</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robot_malfunction</span><span class="p">:</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">    </span><span class="nt">robots_to_disable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;floor_robot&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robot_malfunction</span><span class="p">:</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.0</span>
<span class="w">    </span><span class="nt">robots_to_disable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;floor_robot&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">225.0</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robot_malfunction</span><span class="p">:</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">    </span><span class="nt">robots_to_disable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;ceiling_robot&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">submission_condition</span><span class="p">:</span>
<span class="w">      </span><span class="nt">order_id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MMB30H58&#39;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">robot_malfunction</span><span class="p">:</span>
<span class="w">    </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span>
<span class="w">    </span><span class="nt">robots_to_disable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;floor_robot&#39;</span><span class="p p-Indicator">,</span><span class="s">&#39;ceiling_robot&#39;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">part_place_condition</span><span class="p">:</span>
<span class="w">      </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;green&#39;</span>
<span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;sensor&#39;</span>
<span class="w">      </span><span class="nt">agv</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</pre></div>
</div>
</div>
</section>
<section id="id9">
<h3>Detection<a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<p>To detect a robot malfunction, the CCS needs a subscriber to the topic <span class="topic">/ariac/robot_health</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-Robots"><span class="xref std std-term">ariac_msgs/msg/Robots</span></a>). The message contains Boolean-type fields which provide information on the health of the robots. A value of <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">true</span></code> indicates that the robot is healthy and can be controlled by the CCS. A value of <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">false</span></code> indicates that the robot is malfunctioning and cannot be controlled by the CCS.</p>
</section>
</section>
<section id="sensor-blackout">
<span id="target-to-sensor-blackout"></span><h2>Sensor Blackout<a class="headerlink" href="#sensor-blackout" title="Permalink to this heading"></a></h2>
<p>The sensor blackout challenge simulates a situation where some sensors stop reporting data for <span class="math notranslate nohighlight">\(x\)</span> seconds.</p>
<blockquote>
<div><p>The goal of this challenge is to test the ability of the CCS to use an internal world model to continue the tasks that were being performed before the blackout.</p>
</div></blockquote>
<p>The sensor blackout challenge is triggered based on <a class="hxr-hoverxref hxr-modal reference internal" href="orders.html#conditions"><span class="std std-ref">conditions</span></a>. When a <em>sensor type</em> is disabled, all sensors of this type stop publishing data on their respective topics. Once the challenge is resolved (after a duration), these sensors will start publishing  again.</p>
<section id="id10">
<h3>Setup<a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<p>The subfield <code class="code yamlname docutils literal notranslate"><span class="pre">sensor_blackout</span></code> of <code class="code yamlname docutils literal notranslate"><span class="pre">challenges</span></code> is used to describe a sensor blackout challenge.
The relevant fields for this agility challenge are listed below.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code yamlname docutils literal notranslate"><span class="pre">duration</span></code>: The duration of the sensor blackout in seconds.</p></li>
<li><p><code class="code yamlname docutils literal notranslate"><span class="pre">sensors_to_disable</span></code>: A list of sensor types to disable:</p>
<ul>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;break_beam&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;proximity&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;laser_profiler&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;lidar&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;camera&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;logical_camera&#39;</span></code></p></li>
</ul>
</li>
<li><p><a class="hxr-hoverxref hxr-modal reference internal" href="orders.html#conditions"><span class="std std-ref">One condition</span></a> to trigger the challenge.</p></li>
</ul>
</div></blockquote>
<p>The sensor blackout challenge can occur multiple times in the same trial.
<a class="hxr-hoverxref hxr-tooltip reference internal" href="#sensor-blackout-yaml"><span class="std std-numref">Listing 18</span></a> shows the challenge occurring twice in the same trial.
One  occurrence of the challenge disables the break beam sensor type for 25 seconds when the
competition time reaches 20 seconds. The other occurrence of the challenge disables the lidar
and logical camera sensor types for 15 seconds when an order is submitted.</p>
<div class="literal-block-wrapper docutils container" id="sensor-blackout-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 18 </span><span class="caption-text">Example of multiple occurrences of the sensor blackout challenge in the same trial.</span><a class="headerlink" href="#sensor-blackout-yaml" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">challenges</span><span class="p">:</span>
<span class="hll"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor_blackout</span><span class="p">:</span>
</span><span class="w">      </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">      </span><span class="nt">sensors_to_disable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;break_beam&#39;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span>
<span class="hll"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">sensor_blackout</span><span class="p">:</span>
</span><span class="w">      </span><span class="nt">duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.0</span>
<span class="w">      </span><span class="nt">sensors_to_disable</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;lidar&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;logical_camera&#39;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">submission_condition</span><span class="p">:</span>
<span class="w">        </span><span class="nt">order_id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MMB30H57&#39;</span>
</pre></div>
</div>
</div>
</section>
<section id="id11">
<h3>Detection<a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<p>To detect a sensor blackout the CCS needs a subscriber to
the topic <span class="topic">/ariac/sensor_health</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-Sensors"><span class="xref std std-term">ariac_msgs/msg/Sensors</span></a>).
The message contains Boolean-type fields which provide information on the health of each sensor type.
A <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">true</span></code> value indicates that all sensors of a type are healthy (they are publishing to topics)
and a <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">false</span></code> value indicates that all sensors of a type are malfunctioning
(they are not publishing to topics).</p>
</section>
</section>
<section id="high-priority-orders">
<h2>High-priority Orders<a class="headerlink" href="#high-priority-orders" title="Permalink to this heading"></a></h2>
<p>The high-priority orders challenge simulates an order that must be completed before a regular-priority order. The high-priority order must be completed and  submitted before the regular-priority order.</p>
<blockquote>
<div><p>The goal of this challenge is to test the ability of the CCS to prioritize  high-priority orders over regular-priority orders. This requires the CCS to  be able to detect when a high-priority order is announced and to switch task.</p>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A high-priority order can be announced in one of the two following <a class="hxr-hoverxref hxr-modal reference internal" href="orders.html#conditions"><span class="std std-ref">conditions</span></a>: Time or part placement. The submission condition is not used to announce a high-priority order.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A high-priority order will only be announced when only regular-priority orders have been announced. A high-priority order will not be announced if there is already a high-priority order in the queue.</p>
</div>
<section id="id12">
<h3>Setup<a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<p>To specify a high-priority order, the <code class="code yamlname docutils literal notranslate"><span class="pre">priority</span></code> field is set to <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">true</span></code> in the order description. <a class="hxr-hoverxref hxr-tooltip reference internal" href="#high-priority-order-yaml"><span class="std std-numref">Listing 19</span></a> shows a high-priority order for order <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;MMB30H57&#39;</span></code> and a regular-priority order for order <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;MMB30H58&#39;</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="high-priority-order-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 19 </span><span class="caption-text">Example of a high-priority order for order <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;MMB30H58&#39;</span></code>.</span><a class="headerlink" href="#high-priority-order-yaml" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">orders</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MMB30H58&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;kitting&#39;</span>
<span class="w">    </span><span class="nt">announcement</span><span class="p">:</span>
<span class="w">      </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">kitting_task</span><span class="p">:</span>
<span class="w">      </span><span class="nt">agv_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="nt">tray_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;warehouse&#39;</span>
<span class="w">      </span><span class="nt">products</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">          </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;blue&#39;</span>
<span class="w">          </span><span class="nt">quadrant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MMB30H57&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;kitting&#39;</span>
<span class="w">    </span><span class="nt">announcement</span><span class="p">:</span>
<span class="w">      </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">44.5</span>
<span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">kitting_task</span><span class="p">:</span>
<span class="w">      </span><span class="nt">agv_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">      </span><span class="nt">tray_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;warehouse&#39;</span>
<span class="w">      </span><span class="nt">products</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;sensor&#39;</span>
<span class="w">          </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;orange&#39;</span>
<span class="w">          </span><span class="nt">quadrant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</pre></div>
</div>
</div>
</section>
<section id="id13">
<h3>Detection<a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<p>To find out out the priority of an order, the CCS is required to parse messages published to the topic <span class="topic">/ariac/orders</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-Order"><span class="xref std std-term">ariac_msgs/msg/Order</span></a>). For a high-priority order, the value for the field <code class="code yamlname docutils literal notranslate"><span class="pre">priority</span></code> is set to <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">true</span></code>. For a regular-priority order, the value for the field <code class="code yamlname docutils literal notranslate"><span class="pre">priority</span></code> is set to <code class="code highlight yaml docutils literal highlight-yaml"><span class="l l-Scalar l-Scalar-Plain">false</span></code>.</p>
</section>
</section>
<section id="insufficient-parts">
<h2>Insufficient Parts<a class="headerlink" href="#insufficient-parts" title="Permalink to this heading"></a></h2>
<p>The insufficient parts challenge simulates a situation where the workcell does not contain enough parts to complete one or multiple orders.</p>
<blockquote>
<div><p>The goal of this challenge is to test whether or not the CCS is capable of identifying insufficient parts to complete one or multiple orders. When an insufficient parts challenge takes place, the CCS must submit incomplete orders.</p>
</div></blockquote>
<section id="id14">
<h3>Setup<a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<p>There is no specific field in the trial configuration file to specify this challenge.  <a class="hxr-hoverxref hxr-tooltip reference internal" href="#insufficient-parts-yaml"><span class="std std-numref">Listing 20</span></a> shows a trial configuration file where the workcell does not have enough parts to complete order <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;MMB30H58&#39;</span></code>. The order requires 4 blue batteries but the whole workcell has only 2 blue batteries (located in bin1).</p>
<div class="literal-block-wrapper docutils container" id="insufficient-parts-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 20 </span><span class="caption-text">Example of insufficient parts challenge.</span><a class="headerlink" href="#insufficient-parts-yaml" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">parts</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bins</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bin1</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pump&#39;</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;red&#39;</span>
<span class="w">        </span><span class="nt">slots</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">3</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">rotation</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pi/6&#39;</span>
<span class="w">        </span><span class="nt">flipped</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">        </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;blue&#39;</span>
<span class="w">        </span><span class="nt">slots</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">4</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">5</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">rotation</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;pi/2&#39;</span>
<span class="w">        </span><span class="nt">flipped</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">orders</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;MMB30H58&#39;</span>
<span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;kitting&#39;</span>
<span class="w">    </span><span class="nt">announcement</span><span class="p">:</span>
<span class="w">      </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">priority</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">    </span><span class="nt">kitting_task</span><span class="p">:</span>
<span class="w">      </span><span class="nt">agv_number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="nt">tray_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="nt">destination</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;warehouse&#39;</span>
<span class="w">      </span><span class="nt">products</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">          </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;blue&#39;</span>
<span class="w">          </span><span class="nt">quadrant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">          </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;blue&#39;</span>
<span class="w">          </span><span class="nt">quadrant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">          </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;blue&#39;</span>
<span class="w">          </span><span class="nt">quadrant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;battery&#39;</span>
<span class="w">          </span><span class="nt">color</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;blue&#39;</span>
<span class="w">          </span><span class="nt">quadrant</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
</pre></div>
</div>
</div>
</section>
<section id="id15">
<h3>Detection<a class="headerlink" href="#id15" title="Permalink to this heading"></a></h3>
<p>To figure out if the insufficient parts challenge is part of a trial, the CCS can rely on two important topics to retrieve part type, color, and quantity from bins and the conveyor belt.</p>
<section id="bins">
<h4>Bins<a class="headerlink" href="#bins" title="Permalink to this heading"></a></h4>
<p>The topic <span class="topic">/ariac/bin_parts</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-BinParts"><span class="xref std std-term">ariac_msgs/msg/BinParts</span></a>) outputs for each bin: The type, the color, and the quantity of parts. An  output from <code class="code highlight console docutils literal highlight-console"><span class="go">ros2 topic echo /ariac/bin_parts</span></code> is provided in  <a class="hxr-hoverxref hxr-tooltip reference internal" href="#bin-parts-outputs"><span class="std std-numref">Listing 21</span></a>. The output shows that bin1 contains 3 red pumps and 2 blue batteries.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="bin-parts-outputs">
<div class="code-block-caption"><span class="caption-number">Listing 21 </span><span class="caption-text">Message published on the topic <span class="topic">/ariac/bin_parts</span>.</span><a class="headerlink" href="#bin-parts-outputs" title="Permalink to this code"></a></div>
<div class="no-copybutton highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">---</span>
<span class="go">bins:</span>
<span class="go">- bin_number: 1</span>
<span class="go">  parts:</span>
<span class="go">  - part:</span>
<span class="go">      color: 0</span>
<span class="go">      type: 11</span>
<span class="go">    quantity: 3</span>
<span class="go">  - part:</span>
<span class="go">      color: 2</span>
<span class="go">      type: 10</span>
<span class="go">    quantity: 2</span>
<span class="go">---</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Bins that do not contain parts are not included in the message.</p>
</div>
</div></blockquote>
</section>
<section id="conveyor-belt">
<h4>Conveyor Belt<a class="headerlink" href="#conveyor-belt" title="Permalink to this heading"></a></h4>
<p>The topic <span class="topic">/ariac/conveyor_parts</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-ConveyorParts"><span class="xref std std-term">ariac_msgs/msg/ConveyorParts</span></a>) outputs information on parts that are expected to spawn on the conveyor belt. An output from <code class="code highlight console docutils literal highlight-console"><span class="go">ros2 topic echo /ariac/conveyor_parts</span></code> is provided in  <a class="hxr-hoverxref hxr-tooltip reference internal" href="#conveyor-parts-outputs"><span class="std std-numref">Listing 22</span></a>. The message shows that 2 red batteries,  2 green sensors, 3 blue regulators, and 1 orange pump will spawn on the conveyor belt.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="conveyor-parts-outputs">
<div class="code-block-caption"><span class="caption-number">Listing 22 </span><span class="caption-text">Message published on the topic <span class="topic">/ariac/conveyor_parts</span>.</span><a class="headerlink" href="#conveyor-parts-outputs" title="Permalink to this code"></a></div>
<div class="no-copybutton highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">---</span>
<span class="go">parts:</span>
<span class="go">- part:</span>
<span class="go">    color: 0</span>
<span class="go">    type: 10</span>
<span class="go">  quantity: 2</span>
<span class="go">- part:</span>
<span class="go">    color: 1</span>
<span class="go">    type: 12</span>
<span class="go">  quantity: 2</span>
<span class="go">- part:</span>
<span class="go">    color: 2</span>
<span class="go">    type: 13</span>
<span class="go">  quantity: 3</span>
<span class="go">- part:</span>
<span class="go">    color: 3</span>
<span class="go">    type: 11</span>
<span class="go">  quantity: 1</span>
<span class="go">---</span>
</pre></div>
</div>
</div>
</div></blockquote>
</section>
</section>
</section>
<section id="human">
<span id="humans"></span><h2>Human<a class="headerlink" href="#human" title="Permalink to this heading"></a></h2>
<p>The human challenge consists of a simulated human navigating the workcell.</p>
<blockquote>
<div><p>The goal of this challenge is to test whether or not the CCS is capable of ensuring the safety of humans on the shop floor.
The ceiling robot has to keep a safe distance from the human at any time.
If the ceiling robot gets too close to the human, the human will be considered to be in danger and two events happen:</p>
<ol class="arabic simple">
<li><p>The human is teleported to a safe location.</p></li>
<li><p>The ceiling robot’s controllers are deactivated for 15 seconds, which is a penalty given to the CCS.</p></li>
</ol>
</div></blockquote>
<p>When the human challenge is used in a trial, the simulated human is assigned one of the following behaviors:</p>
<ul class="simple">
<li><p><strong>Indifferent</strong>: The human operator follows a scripted path, regardless of the location of the robots in the environment.</p></li>
<li><p><strong>Antagonistic</strong>: During an arbitrary period of time, the human operator purposefully moves towards the ceiling robot to interfere with the robot’s current task.</p></li>
<li><p><strong>Helpful</strong>: The human operator will stop moving once the ceiling robot is at a certain distance away from him.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The behavior of a human does not change within a trial, e.g., if the human is assigned the behavior <code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;helpful&#39;</span></code>, the human will always be helpful throughout the trial.</p>
<p>The human in the environment will go to each assembly station in the following order:</p>
<ol class="arabic simple">
<li><p>Assembly station 4</p></li>
<li><p>Assembly station 2</p></li>
<li><p>Assembly station 1</p></li>
<li><p>Assembly station 3</p></li>
</ol>
<p>When the human reaches assembly station 3, he will repeat the process from the beginning.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The penalty given to the CCS for the human challenge is based on the distance between the human and the ceiling robot. The formula for the distance is:</p>
<div class="math notranslate nohighlight">
\[d_{min} = k_H(t_1 + t_2)+ k_{R}t_{1} + B + \delta\]</div>
<p>where <span class="math notranslate nohighlight">\(t_1=1\)</span> is the maximum time between the actuation of the sensing function and the output signal switching devices to the off state, <span class="math notranslate nohighlight">\(t_2=1.5\)</span> is the maximum response time of the machine (i.e., the time required to stop the machine), <span class="math notranslate nohighlight">\(\delta=1\)</span> is an additional distance, based on the expected intrusion toward the critical zone prior to actuation of the protective equipment, <span class="math notranslate nohighlight">\(k_H\)</span> is the speed of the intruding human, <span class="math notranslate nohighlight">\(k_R\)</span> is the speed of the robot, and <span class="math notranslate nohighlight">\(B=0\)</span> is the Euclidean distance required to bring the robot to a safe, controlled stop.</p>
</div>
<section id="id16">
<h3>Setup<a class="headerlink" href="#id16" title="Permalink to this heading"></a></h3>
<p>The subfield <code class="code yamlname docutils literal notranslate"><span class="pre">human</span></code> of <code class="code yamlname docutils literal notranslate"><span class="pre">challenges</span></code> is used to describe a human challenge. The relevant fields for this agility challenge are listed below.</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="code yamlname docutils literal notranslate"><span class="pre">behavior</span></code>: The behavior of the human operator. The possible values are:</p>
<ul>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;indifferent&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;antagonistic&#39;</span></code></p></li>
<li><p><code class="code highlight yaml docutils literal highlight-yaml"><span class="s">&#39;helpful&#39;</span></code></p></li>
</ul>
</li>
<li><p><a class="hxr-hoverxref hxr-modal reference internal" href="orders.html#conditions"><span class="std std-ref">One condition</span></a> to trigger the challenge.</p></li>
</ul>
</div></blockquote>
<div class="literal-block-wrapper docutils container" id="human-yaml">
<div class="code-block-caption"><span class="caption-number">Listing 23 </span><span class="caption-text">Human challenge setup in a trial file.</span><a class="headerlink" href="#human-yaml" title="Permalink to this code"></a></div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">challenges</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">human</span><span class="p">:</span>
<span class="w">      </span><span class="nt">behavior</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;antagonistic&#39;</span>
<span class="w">      </span><span class="nt">time_condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w"> </span><span class="c1"># starts 10 s after the start of the competition</span>
</pre></div>
</div>
</div>
</section>
<section id="id17">
<h3>Detection<a class="headerlink" href="#id17" title="Permalink to this heading"></a></h3>
<p>The pose of the human is published to the topic <span class="topic">/ariac_human/state</span> (<a class="hxr-hoverxref hxr-tooltip reference internal" href="ros_communication.html#term-ariac_msgs-msg-HumanState"><span class="xref std std-term">ariac_msgs/msg/HumanState</span></a>).
An output from <code class="code highlight console docutils literal highlight-console"><span class="go">ros2 topic echo /ariac_human/state</span></code> is provided in  <a class="hxr-hoverxref hxr-tooltip reference internal" href="#human-state-outputs"><span class="std std-numref">Listing 24</span></a>.</p>
<blockquote>
<div><div class="literal-block-wrapper docutils container" id="human-state-outputs">
<div class="code-block-caption"><span class="caption-number">Listing 24 </span><span class="caption-text">Message published on the topic <span class="topic">/ariac_human/state</span>.</span><a class="headerlink" href="#human-state-outputs" title="Permalink to this code"></a></div>
<div class="no-copybutton highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">---</span>
<span class="go">human_position:</span>
<span class="go">  x: -14.993921250341705</span>
<span class="go">  y: -9.99998557033615</span>
<span class="go">  z: 0.010023161632176515</span>
<span class="go">robot_position:</span>
<span class="go">  x: -7.0000003262450905</span>
<span class="go">  y: 8.445047061655941e-08</span>
<span class="go">  z: 0.7000000000000002</span>
<span class="go">human_velocity:</span>
<span class="go">  x: 5.6589307392557084e-05</span>
<span class="go">  y: -1.1679465760540981e-06</span>
<span class="go">  z: 2.8776304097214153e-05</span>
<span class="go">robot_velocity:</span>
<span class="go">  x: -9.607729520546026e-10</span>
<span class="go">  y: 1.325746825962516e-10</span>
<span class="go">  z: 0.0</span>
<span class="go">---</span>
</pre></div>
</div>
</div>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ros_communication.html" class="btn btn-neutral float-left" title="ROS Communication Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tf_frames.html" class="btn btn-neutral float-right" title="TF Frames" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright works of NIST employees are not not subject to copyright protection in the United States.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   

  <!-- Taken from https://www.filamentgroup.com/lab/html-includes/#another-demo%3A-including-another-html-file -->
  <iframe src="../_static/ntd2d_menu.html" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>

</body>
</html>
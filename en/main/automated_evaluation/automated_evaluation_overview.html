<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Automated Evaluation &mdash; ARIAC_docs 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
      <link rel="stylesheet" type="text/css" href="../_static/ntd2d.css?v=592263c6" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/twemoji.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=62faf5e4" />
      <link rel="stylesheet" type="text/css" href="../_static/css/hack.css?v=c2ad982c" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=359c27e9"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="../_static/js/hoverxref.js"></script>
        <script src="../_static/js/tooltipster.bundle.min.js"></script>
        <script src="../_static/js/micromodal.min.js"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=faefdcb3"></script>
        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>
        <script src="../_static/twemoji.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../_static/js/custom.js?v=8fe80478"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Launch File Setup" href="competition_launch.html" />
    <link rel="prev" title="Tutorial 8: Move Robots with ROS2 Actions" href="../tutorials/tutorial_8.html" />
   

  <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
  <script src="https://code.jquery.com/jquery-3.6.2.min.js" type="text/javascript" defer="defer"></script>
  <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>


</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARIAC_docs
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">⏩ Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installing ARIAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/registering.html">Registering for the Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/events.html">Calendar of Events</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">⏩ Competition Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../competition/terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/overview.html">Overview of the Competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/environment.html">Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/orders.html">Conditions, Orders, and Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/sensors.html">Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/trials.html">Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/ros_communication.html">ROS Communication Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/challenges.html">Agility Challenges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/tf_frames.html">TF Frames</a></li>
<li class="toctree-l1"><a class="reference internal" href="../competition/scoring.html">Scoring</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">⏩ Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorials.html">Introduction to Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_1.html">Tutorial 1: Create a Competition Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_2.html">Tutorial 2: Read Data from a Break Beam Sensor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_3.html">Tutorial 3: Read Data from an Advanced Logical Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_4.html">Tutorial 4: Read an Order</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_5.html">Tutorial 5: Move AGVs to Stations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_6.html">Tutorial 6: Enable/Disable a Gripper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_7.html">Tutorial 7: Move Robots with MoveIt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/tutorial_8.html">Tutorial 8: Move Robots with ROS2 Actions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">⏩ Automated Evaluation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Automated Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file-example">Configuration File Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#instructions">Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#testing-the-automated-evaluation">Testing the Automated Evaluation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="competition_launch.html">Launch File Setup</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARIAC_docs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Automated Evaluation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/automated_evaluation/automated_evaluation_overview.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="automated-evaluation">
<h1>Automated Evaluation<a class="headerlink" href="#automated-evaluation" title="Permalink to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>To score each team’s system, an semi-automated system is used. A docker container is created for each team with the ARIAC environment pre-installed. The docker container also includes VNC in order to display the gazebo environment while it is run. To properly build and install the competitor’s code onto the container each team must submit a configuration file using the following template. The yaml configuration file should be submitted to the Google Drive folder for your team.</p>
</section>
<section id="configuration-file-example">
<h2>Configuration File Example<a class="headerlink" href="#configuration-file-example" title="Permalink to this heading"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># team configuration for automated evaluation</span>

<span class="nt">team_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nist_competitor&quot;</span>

<span class="nt">github</span><span class="p">:</span>
<span class="w">  </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;github.com/jaybrecht/nist_competitor.git&quot;</span>
<span class="w">  </span><span class="nt">personal_access_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;****&quot;</span>

<span class="nt">build</span><span class="p">:</span>
<span class="w">  </span><span class="nt">debian_packages</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">pip_packages</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
<span class="w">  </span><span class="nt">extra_build_scripts</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>

<span class="nt">competition</span><span class="p">:</span>
<span class="w">  </span><span class="nt">package_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;nist_competitor&quot;</span>
<span class="w">  </span><span class="nt">launch_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;competitor.launch.py&quot;</span>
</pre></div>
</div>
</section>
<section id="instructions">
<h2>Instructions<a class="headerlink" href="#instructions" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Competitors must upload their ROS package to a private github repository. Please ensure that only the ROS package you created is uploaded to this repository. If you include the entire ROS workspace it will not work properly. If you have multiple ROS packages they can all be included in a single folder. The ARIAC repository is an example of this setup.</p></li>
<li><p>For the repository link ensure that it is structured exactly like the example above with the <code class="docutils literal notranslate"><span class="pre">https://</span></code> excluded.</p></li>
<li><p>For the docker container to clone the environment teams will need to create a personal_access_token for the repository, <a class="reference external" href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">the intructions for which are shown here</a>. We suggest creating a fine-grain token and only giving read access permissions for the competition repository.</p></li>
<li><p>The build scripts for the docker container will run rosdep automatically to ensure that any ROS packages you have included in your package manifest (<code class="docutils literal notranslate"><span class="pre">package.xml</span></code>) will be installed. However if you need to install packages that are not included in rosdep you can add them to the build section. Currently debian packages (installed using apt) and pip packages (installed using pip3) are supported. If you would like to run custom build scripts, add those to the competitor_build_scripts directory and include the file name in the <code class="docutils literal notranslate"><span class="pre">extra_build_scripts</span></code> section of the yaml file. These scripts will also need to be added to the Google Drive folder.</p></li>
<li><p>The competition section includes a launch file and the name of the package that includes that launch file. For the automated evaluation to work properly competitors must create a custom ROS launch file that starts the environment and any nodes that are necessary to complete the competiition. <a class="reference internal" href="competition_launch.html"><span class="std std-doc">Detailed instructions for this launch file are shown here</span></a></p>
<ul>
<li><p><em>Note: if you have multiple ROS packages ensure that the package_name is set for the package that includes the launch file</em></p></li>
</ul>
</li>
</ul>
</section>
<section id="testing-the-automated-evaluation">
<h2>Testing the Automated Evaluation<a class="headerlink" href="#testing-the-automated-evaluation" title="Permalink to this heading"></a></h2>
<ol class="arabic">
<li><p>To run the automated evaluation you must have docker installed. The instructions for installing Docker Desktop (a GUI program that interfaces with Docker) are found <a class="reference external" href="https://docs.docker.com/desktop/install/ubuntu/">here</a>. The instructions to install Docker Engine with the commanand-line interface only are found <a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">here</a>. Either should work for testing the automated evaluation.</p></li>
<li><p>After docker is installed pull the ARIAC image from docker hub using the terminal command:</p>
<p><code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">image</span> <span class="pre">pull</span> <span class="pre">nistariac/ariac2023:latest</span></code></p>
</li>
<li><p>Next ensure that the most up-to-date version of ARIAC2023 (at least version 1.2) is on your machine. You can ensure this by running <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code> from <code class="docutils literal notranslate"><span class="pre">~/ariac_ws/src/ariac</span></code></p></li>
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">automated_evaluation</span></code> folder</p>
<p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/ariac_ws/src/ariac/automated_evaluation</span></code></p>
</li>
<li><p>Add your team configuration file to this folder. It can be named however you like.</p></li>
<li><p>Ensure that the <code class="docutils literal notranslate"><span class="pre">build_container</span></code> and <code class="docutils literal notranslate"><span class="pre">run_trial</span></code> scripts can be run as executables:</p>
<p><code class="docutils literal notranslate"><span class="pre">chmod</span> <span class="pre">+x</span> <span class="pre">build_container.sh</span> <span class="pre">run_trial.sh</span></code></p>
</li>
<li><p>Make sure the docker engine is running.</p></li>
<li><p>Add any trials you want to test to the <code class="docutils literal notranslate"><span class="pre">~/ariac_ws/src/ariac/automated_evaluation/trials</span></code> folder. These will be copied to the container during the build process.</p></li>
<li><p>Run the build script with the name of your configuration file (without .yaml) as the first argument and the port number for VNC as the second. For example to build the nist_competitor container on port 6080 you would run:</p>
<p><code class="docutils literal notranslate"><span class="pre">./build_container.sh</span> <span class="pre">nist_competitor</span> <span class="pre">6080</span></code></p>
<ul class="simple">
<li><p>To run the nist_competitor example the personal_access_token should be replaced with the following: <code class="docutils literal notranslate"><span class="pre">github(UNDERSCORE)pat(UNDERSCORE)11AMERXRA0077fKXamvIKb_3YPuZm5p653Jerzr0BB0PfaFjv2OC5aPs1ujpYTeqm6JX6DNC3GXsCg1xYu</span></code></p>
<ul>
<li><p>replace <code class="docutils literal notranslate"><span class="pre">(UNDERSCORE)</span></code>’s with <code class="docutils literal notranslate"><span class="pre">_</span></code></p></li>
</ul>
</li>
<li><p>This will create a container from the ARIAC image and attempt to clone and build the competitor package. You should see output in the terminal. If the build is successful continute onto the next step. If not, delete the created container (e.g., <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">rm</span> <span class="pre">nist_competitor</span> <span class="pre">--force</span></code>), fix the error and run the <code class="docutils literal notranslate"><span class="pre">build_container</span></code> script again. If the build script is successful it only needs to be run once. All trials can be run using this container.</p></li>
</ul>
</li>
<li><p>After the container is built and running, open a web browser and navigate to <code class="docutils literal notranslate"><span class="pre">http://localhost:6080/</span></code>. This should show a VNC display for the container.</p></li>
<li><p>To run a trial use the <code class="docutils literal notranslate"><span class="pre">run_trial.sh</span></code> script. The first argument is the team name which should also be the name of the container. The second argument is the name of the trial to be run. If no second argument is passed all trials in the folder will be run sequentially. For example to run the nist_competitor with  <code class="docutils literal notranslate"><span class="pre">kitting.yaml</span></code> trial you would run:</p>
<p><code class="docutils literal notranslate"><span class="pre">./run_trial.sh</span> <span class="pre">nist_competitor</span> <span class="pre">kitting</span></code></p>
</li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tutorials/tutorial_8.html" class="btn btn-neutral float-left" title="Tutorial 8: Move Robots with ROS2 Actions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="competition_launch.html" class="btn btn-neutral float-right" title="Launch File Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright works of NIST employees are not not subject to copyright protection in the United States.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   

  <!-- Taken from https://www.filamentgroup.com/lab/html-includes/#another-demo%3A-including-another-html-file -->
  <iframe src="../_static/ntd2d_menu.html" onload="this.before((this.contentDocument.body||this.contentDocument).children[0]);this.remove()"></iframe>

</body>
</html>